{"ast":null,"code":"// https://gist.github.com/mudge/5830382?permalink_comment_id=2658721#gistcomment-2658721\nexport class EventEmitter {\n  constructor() {\n    this.events = {};\n  }\n\n  on(event, listener) {\n    if (typeof this.events[event] !== 'object') {\n      this.events[event] = [];\n    }\n\n    this.events[event].push(listener);\n    return () => this.removeListener(event, listener);\n  }\n\n  removeListener(event, listener) {\n    if (typeof this.events[event] !== 'object') {\n      return;\n    }\n\n    if (!listener) {\n      this.events[event] = [];\n      return;\n    }\n\n    const idx = this.events[event].indexOf(listener);\n\n    if (idx > -1) {\n      this.events[event].splice(idx, 1);\n    }\n  }\n\n  removeAllListeners() {\n    Object.keys(this.events).forEach(event => this.events[event].splice(0, this.events[event].length));\n  }\n\n  emit(event) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    if (typeof this.events[event] !== 'object') {\n      return;\n    }\n\n    ;\n    [...this.events[event]].forEach(listener => listener.apply(this, args));\n  }\n\n  once(event, listener) {\n    var _this = this;\n\n    const remove = this.on(event, function () {\n      remove();\n\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      listener.apply(_this, args);\n    });\n    return remove;\n  }\n\n}","map":{"version":3,"mappings":"AAAA;AAOA,OAAM,MAAOA,YAAP,CAAmB;EAAzBC;IACmB,cAAkB,EAAlB;EAiDlB;;EA/CQC,EAAE,CAACC,KAAD,EAAgBC,QAAhB,EAAkC;IACzC,IAAI,OAAO,KAAKC,MAAL,CAAYF,KAAZ,CAAP,KAA8B,QAAlC,EAA4C;MAC1C,KAAKE,MAAL,CAAYF,KAAZ,IAAqB,EAArB;IACD;;IAED,KAAKE,MAAL,CAAYF,KAAZ,EAAmBG,IAAnB,CAAwBF,QAAxB;IACA,OAAO,MAAM,KAAKG,cAAL,CAAoBJ,KAApB,EAA2BC,QAA3B,CAAb;EACD;;EAEMG,cAAc,CAACJ,KAAD,EAAgBC,QAAhB,EAAmC;IACtD,IAAI,OAAO,KAAKC,MAAL,CAAYF,KAAZ,CAAP,KAA8B,QAAlC,EAA4C;MAC1C;IACD;;IAED,IAAI,CAACC,QAAL,EAAe;MACb,KAAKC,MAAL,CAAYF,KAAZ,IAAqB,EAArB;MACA;IACD;;IAED,MAAMK,GAAG,GAAW,KAAKH,MAAL,CAAYF,KAAZ,EAAmBM,OAAnB,CAA2BL,QAA3B,CAApB;;IACA,IAAII,GAAG,GAAG,CAAC,CAAX,EAAc;MACZ,KAAKH,MAAL,CAAYF,KAAZ,EAAmBO,MAAnB,CAA0BF,GAA1B,EAA+B,CAA/B;IACD;EACF;;EAEMG,kBAAkB;IACvBC,MAAM,CAACC,IAAP,CAAY,KAAKR,MAAjB,EAAyBS,OAAzB,CAAkCX,KAAD,IAC/B,KAAKE,MAAL,CAAYF,KAAZ,EAAmBO,MAAnB,CAA0B,CAA1B,EAA6B,KAAKL,MAAL,CAAYF,KAAZ,EAAmBY,MAAhD,CADF;EAGD;;EAEMC,IAAI,CAACb,KAAD,EAA8B;IAAA,kCAAXc,IAAW;MAAXA,IAAW;IAAA;;IACvC,IAAI,OAAO,KAAKZ,MAAL,CAAYF,KAAZ,CAAP,KAA8B,QAAlC,EAA4C;MAC1C;IACD;;IAED;IAAC,CAAC,GAAG,KAAKE,MAAL,CAAYF,KAAZ,CAAJ,EAAwBW,OAAxB,CAAiCV,QAAD,IAAcA,QAAQ,CAACc,KAAT,CAAe,IAAf,EAAqBD,IAArB,CAA9C;EACF;;EAEME,IAAI,CAAChB,KAAD,EAAgBC,QAAhB,EAAkC;IAAA;;IAC3C,MAAMgB,MAAM,GAAe,KAAKlB,EAAL,CAAQC,KAAR,EAAe,YAAmB;MAC3DiB,MAAM;;MADqD,mCAAfH,IAAe;QAAfA,IAAe;MAAA;;MAE3Db,QAAQ,CAACc,KAAT,CAAe,KAAf,EAAqBD,IAArB;IACD,CAH0B,CAA3B;IAKA,OAAOG,MAAP;EACD;;AAjDsB","names":["EventEmitter","constructor","on","event","listener","events","push","removeListener","idx","indexOf","splice","removeAllListeners","Object","keys","forEach","length","emit","args","apply","once","remove"],"sourceRoot":"","sources":["../../../src/matrix-client/EventEmitter.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}